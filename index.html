<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°ì´í„° ë¶„ì„ ìš”ì²­ ëŒ€ì‹œë³´ë“œ</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <style>
        :root {
            --primary-color: #4F46E5; /* ëª¨ë˜í•œ ì¸ë””ê³  ë¸”ë£¨ */
            --primary-hover: #4338ca;
            --bg-color: #F3F4F6;
            --card-bg: #ffffff;
            --text-main: #111827;
            --text-sub: #6B7280;
            --border-color: #E5E7EB;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-main);
        }

        .container {
            background: var(--card-bg);
            width: 100%;
            max-width: 520px;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            margin: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 800;
            margin: 0 0 8px 0;
            color: var(--text-main);
        }

        .header p {
            font-size: 14px;
            color: var(--text-sub);
            margin: 0;
        }

        .section-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
            margin-top: 24px;
            display: flex;
            align-items: center;
        }
        
        .section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border-color);
            margin-left: 10px;
        }

        .input-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 6px;
        }

        /* ì…ë ¥ì°½ ë””ìì¸ ê°œì„  */
        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            background-color: #F9FAFB;
            transition: all 0.2s ease;
            box-sizing: border-box;
            outline: none;
            color: var(--text-main);
        }

        input:focus, select:focus {
            background-color: #fff;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        /* ë‚ ì§œ ì…ë ¥ì°½ placeholder íŠ¸ë¦­ */
        input[type="date"] {
            color: var(--text-main);
        }
        
        /* ë‚ ì§œ ë ˆì´ì•„ì›ƒ */
        .date-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        /* ë²„íŠ¼ ë””ìì¸ */
        .btn-submit {
            width: 100%;
            padding: 16px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 32px;
            transition: transform 0.1s ease, background-color 0.2s;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2);
        }

        .btn-submit:hover {
            background-color: var(--primary-hover);
            transform: translateY(-1px);
        }

        .btn-submit:active {
            transform: translateY(1px);
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .btn-submit.loading {
            background-color: #9CA3AF;
            cursor: not-allowed;
            transform: none;
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>ë°ì´í„° ë¹„êµ ìš”ì²­</h1>
            <p>ë¶„ì„í•  ê¸°ê°„ê³¼ ì‚¬ì—…ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
        </div>

        <div class="input-group">
            <label>ìš”ì²­ì ì´ë¦„</label>
            <input type="text" id="user-name" placeholder="ì˜ˆ: ê¹€ì² ìˆ˜">
        </div>

        <div class="input-group">
            <label>ì‚¬ì—…ë¶€ ì„ íƒ</label>
            <select id="business-unit">
                <option value="" disabled selected>ì‚¬ì—…ë¶€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="hackers_english">í•´ì»¤ìŠ¤ì˜ì–´</option>
                <option value="hackers_ingang">í•´ì»¤ìŠ¤ì¸ê°•</option>
                <option value="hackers_language">í•´ì»¤ìŠ¤ì–´í•™ì›</option>
            </select>
        </div>

        <div class="section-title">Period A (ê¸°ì¤€ ê¸°ê°„)</div>
        <div class="date-row">
            <div>
                <label>ì‹œì‘ì¼</label>
                <input type="text" id="start-date-A" placeholder="ë‚ ì§œ ì„ íƒ" onfocus="(this.type='date')" onblur="(this.type='text')">
            </div>
            <div>
                <label>ì¢…ë£Œì¼</label>
                <input type="text" id="end-date-A" placeholder="ë‚ ì§œ ì„ íƒ" onfocus="(this.type='date')" onblur="(this.type='text')">
            </div>
        </div>

        <div class="section-title">Period B (ë¹„êµ ê¸°ê°„)</div>
        <div class="date-row">
            <div>
                <label>ì‹œì‘ì¼</label>
                <input type="text" id="start-date-B" placeholder="ë‚ ì§œ ì„ íƒ" onfocus="(this.type='date')" onblur="(this.type='text')">
            </div>
            <div>
                <label>ì¢…ë£Œì¼</label>
                <input type="text" id="end-date-B" placeholder="ë‚ ì§œ ì„ íƒ" onfocus="(this.type='date')" onblur="(this.type='text')">
            </div>
        </div>

        <button type="button" class="btn-submit" onclick="sendDataToN8n()">ë°ì´í„° ì „ì†¡í•˜ê¸°</button>
    </div>

    <script>
        function sendDataToN8n() {
            // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const userName = document.getElementById('user-name').value;
            const businessUnit = document.getElementById('business-unit').value;
            const startDateA = document.getElementById('start-date-A').value;
            const endDateA = document.getElementById('end-date-A').value;
            const startDateB = document.getElementById('start-date-B').value;
            const endDateB = document.getElementById('end-date-B').value;

            // ìœ íš¨ì„± ê²€ì‚¬
            if (!userName) { alert("ìš”ì²­ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
            if (!businessUnit) { alert("ì‚¬ì—…ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”."); return; }
            if (!startDateA || !endDateA || !startDateB || !endDateB) {
                alert("ëª¨ë“  ê¸°ê°„ì„ ì„¤ì •í•´ì£¼ì„¸ìš”.");
                return;
            }

            // ë²„íŠ¼ ë¡œë”© ìƒíƒœë¡œ ë³€ê²½
            const btn = document.querySelector('.btn-submit');
            const originalText = btn.innerText;
            btn.innerText = "ì „ì†¡ ì¤‘...";
            btn.classList.add('loading');
            btn.disabled = true;

            // ë³´ë‚¼ ë°ì´í„° êµ¬ì„±
            const payload = {
                requester: userName, // ìš”ì²­ì ì´ë¦„ ì¶”ê°€
                business_unit: businessUnit,
                period_A: { start: startDateA, end: endDateA },
                period_B: { start: startDateB, end: endDateB },
                request_time: new Date().toISOString()
            };

            // ==========================================
            // [ì£¼ì˜] ì—¬ê¸°ì— n8n Tunnel URLì„ ë„£ìœ¼ì„¸ìš”
            // ==========================================
            const webhookUrl = 'http://localhost:5677/webhook-test/732d0e94-da9b-4e0c-80c5-10c46f838e37'; 

            fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            })
            .then(response => {
                if (response.ok) {
                    alert('ğŸš€ ë°ì´í„° ì „ì†¡ ì™„ë£Œ! n8nì„ í™•ì¸í•˜ì„¸ìš”.');
                } else {
                    alert('âŒ ì „ì†¡ ì‹¤íŒ¨. ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                }
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('âš ï¸ ì—ëŸ¬ ë°œìƒ: ' + error);
            })
            .finally(() => {
                // ë²„íŠ¼ ì›ìƒë³µêµ¬
                btn.innerText = originalText;
                btn.classList.remove('loading');
                btn.disabled = false;
            });
        }
    </script>

</body>
</html>
